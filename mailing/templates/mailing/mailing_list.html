{% extends 'base.html' %}
{% block title %}–†–∞—Å—Å—ã–ª–∫–∏{% endblock %}
{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>üì¨ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏</h2>
        <a href="{% url 'mailing:mailing_create' %}" class="btn btn-primary">
            ‚ûï –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É
        </a>
    </div>

    {% if object_list %}
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–¢–µ–º–∞ –ø–∏—Å—å–º–∞</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</th>
                        <th>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</th>
                        <th>–ü–æ–ª—É—á–∞—Ç–µ–ª–µ–π</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for mailing in object_list %}
                    <tr>
                        <td>{{ mailing.id }}</td>
                        <td>{{ mailing.message.subject|truncatechars:50 }}</td>
                        <td>
                            <span class="badge {% if mailing.status == '–ó–∞–ø—É—â–µ–Ω–∞' %}bg-success
                                             {% elif mailing.status == '–°–æ–∑–¥–∞–Ω–∞' %}bg-warning text-dark
                                             {% else %}bg-secondary{% endif %}">
                                {{ mailing.status }}
                            </span>
                        </td>
                        <td>{{ mailing.start_time|date:"d.m.Y H:i" }}</td>
                        <td>{{ mailing.end_time|date:"d.m.Y H:i" }}</td>
                        <td>{{ mailing.recipients.count }}</td>
                        <td>
                            <a href="{% url 'mailing:mailing_detail' mailing.pk %}" class="btn btn-sm btn-info">üëÅÔ∏è</a>
                            <a href="{% url 'mailing:mailing_update' mailing.pk %}" class="btn btn-sm btn-warning">‚úèÔ∏è</a>
                            <a href="{% url 'mailing:mailing_delete' mailing.pk %}" class="btn btn-sm btn-danger">üóëÔ∏è</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-info">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫. <a href="{% url 'mailing:mailing_create' %}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é —Ä–∞—Å—Å—ã–ª–∫—É</a>!</p>
        </div>
    {% endif %}
</div>
{% endblock %}
