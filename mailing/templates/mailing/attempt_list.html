{% extends 'base.html' %}
{% block title %}–ü–æ–ø—ã—Ç–∫–∏ —Ä–∞—Å—Å—ã–ª–æ–∫{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2>üìã –ò—Å—Ç–æ—Ä–∏—è –ø–æ–ø—ã—Ç–æ–∫ —Ä–∞—Å—Å—ã–ª–æ–∫</h2>
    
    {% if object_list %}
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                        <th>–†–∞—Å—Å—ã–ª–∫–∞</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞</th>
                    </tr>
                </thead>
                <tbody>
                    {% for attempt in object_list %}
                    <tr>
                        <td>{{ attempt.attempt_time|date:"d.m.Y H:i:s" }}</td>
                        <td>
                            <a href="{% url 'mailing:mailing_detail' attempt.mailing.pk %}">
                                {{ attempt.mailing.message.subject|truncatechars:30 }}
                            </a>
                        </td>
                        <td>
                            <span class="badge {% if attempt.status == '–£—Å–ø–µ—à–Ω–æ' %}bg-success{% else %}bg-danger{% endif %}">
                                {{ attempt.status }}
                            </span>
                        </td>
                        <td>{{ attempt.server_response|truncatechars:50 }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-info">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–æ–∫.</p>
        </div>
    {% endif %}
</div>
{% endblock %}
